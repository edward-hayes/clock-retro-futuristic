"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.okOrElse = exports.assertJSON = exports.assertContentType = void 0;
const assertContentType = (expected) => (response) => {
    const contentTypeHeader = response.headers.get('content-type') || '';
    const contentType = contentTypeHeader.split(';', 1)[0];
    if (contentType !== expected) {
        return Promise.reject(new Error(`Unexpected Content-Type: expected '${expected}', got '${contentType}'`));
    }
    return Promise.resolve(response);
};
exports.assertContentType = assertContentType;
const assertJSON = (expected = 'application/json') => async (response) => {
    await (0, exports.assertContentType)(expected)(response);
    return response.json();
};
exports.assertJSON = assertJSON;
const okOrElse = (failure) => (response) => response.ok ? Promise.resolve(response) : failure(response);
exports.okOrElse = okOrElse;
//# sourceMappingURL=fetchUtil.js.map